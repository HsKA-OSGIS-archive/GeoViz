<!--based on: http://bl.ocks.org/bentrm/562ad975d599badf2822 / https://gist.github.com/bentrm/562ad975d599badf2822 -->
<!-- as well as: Learning d3.js mapping - Chapter 5 Example 2 and d3 cookbook - Chapter 12 Example Choropleth map -->
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Raumluft Charts</title>
<!--<link rel="stylesheet" 
          href="../css/style_choropleth_map.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_grouped_vertical_bar.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_dual_scale_bar_chart.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_stacked_vertical_bar.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_sortable_bar_chart.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_tooltip.css" 
          type="text/css">-->
<link rel="stylesheet" 
          href="../css/style_charts.css" 
          type="text/css">
<script src="../lib/jquery-1.11.2.min.js"></script>
<script src="../lib/d3.min.js" charset="utf-8"></script>
<script src="../lib/d3.js" charset="utf-8"></script>
<script src="../lib/d3.tip.v0.6.3.js"></script>
<script src="../lib/topojson.v1.min.js"" charset="utf-8"></script>
<script src="../lib/base.js" charset="utf-8"></script>
<script src="../lib/sparkline.js" charset="utf-8"></script>
<script src="../js/choropleth_map.js"></script>
<script src="../js/grouped_vertical_bar.js"></script>
<script src="../js/stacked_vertical_bar.js"></script>
<script src="../js/dual_scale_bar_chart.js"></script>
<script src="../js/sortable_bar_chart.js"></script>
</head>
<body>
	<!--Define buttons and div for d3 chart-->
	<button id="button_choro" onClick="updateData(this.id)">Choropleth (AVG)</button>
	<button id="button_grouped" onClick="updateData(this.id)">Grouped (AVG)</button>
	<button id="button_stacked" onClick="updateData(this.id)">Stacked (AVG)</button>
	<button id="button_dual" onClick="updateData(this.id)">Dual Scale (RL / BL)</button>
	<button id="button_sortable" onClick="updateData(this.id)">Sortable Bar</button>
	
	<div id="choropleth" visibility:"hidden"></div>
	<div id="grouped"></div>
	<div id="stacked"></div>
	<div id="dual_scale"></div>
	<div id="sortable_bar"></div>
	<label id="label_checkbox"><input type="checkbox" id="checkbox"> Sort values</label>
	
	<!--Define variable to control the type of the drawn chart-->
	<script>
		//var arrayDrawTypes = ["raumluft_avg","raumluft_min","raumluft_max","bodenluft","odl"];
		//console.log(arrayDrawTypes[0]);
		//var drawType = arrayDrawTypes[0];
		
		//Array to realize changing of visualizations with buttons:
		var arrayChartsData = [['button_choro', 'choropleth'],['button_grouped','grouped'],['button_stacked','stacked'],['button_dual','dual_scale'],['button_sortable','sortable_bar']];
		
		//Choropleth:
		var 	choro_div = "#choropleth",
				choro_filenames = ["../data/processed_data/adm/DEU_adm2_pa_clip_total_statistics2_topo.json","../php/DEU_counties_statistics_php.csv",'../php/Raumluft_4326_statistics_php.csv'],
				choro_attribute_choropleth = ["ID_2","AVG_MW_RL"],
				choro_attributes_tooltip = ["HAUSART","BAUWEISE","AVG_MW","MESSW_1G","MESSW_EG","MESSW_KE"],
				choro_domain = [60, 100, 150, 250, 350],
				choro_range = ["#0a6e01", "#40ff05", "#E4FF05", "#FFDB00", "#ff6700", "#ff0000"]; //check domain, add 6th class?
		
		//check grouped and stacked -> error in bars - max and avg not correct!
		//Grouped:
		var 	grouped_div = "#grouped",
				grouped_filename = "../php/Raumluft_4326_statistics_petrograph_php.csv",
				//grouped_attributes = ["petrograph","rl_avg","rl_min","rl_max"],	//first: attribute for x-Axis, the following attributes: attribute for y-Axis (bars)
				grouped_attributes = ["PETROGRAPH","RL_AVG","RL_MIN","RL_MAX"],	//first: attribute for x-Axis, the following attributes: attribute for y-Axis (bars)
				grouped_attributes_tooltip = [["RL_AVG","Average room air measurement", "Bq m-3"], ["RL_MIN","Minimum room air measurement", "Bq m-3"], ["RL_MAX","Maximum room air measurement", "Bq m-3"]],
				grouped_range = ["#98abc5","#6b486b", "#ff8c00"] //; //colors for bars
				grouped_y_axis_annotation = "Radon in room air [Bq m-3]";
		//drawGroupedVerticalBar(grouped_div,grouped_filename,grouped_attributes,grouped_range);
		
		//Stacked:
		var 	stacked_div = "#stacked",
				stacked_filename = "../php/Raumluft_4326_statistics_petrograph_php.csv",
				stacked_attributes = ["PETROGRAPH","RL_AVG","RL_MIN","RL_MAX"],	//first: attribute for x-Axis, the following attributes: attribute for y-Axis (bars)
				stacked_attributes_tooltip = [["RL_AVG","Average room air measurement", "Bq m-3"], ["RL_MIN","Minimum room air measurement", "Bq m-3"], ["RL_MAX","Maximum room air measurement", "Bq m-3"]],
				stacked_range = ["#98abc5","#6b486b", "#ff8c00"] //; //colors for bars
				stacked_y_axis_annotation = "Radon in room air [Bq m-3]";
		//drawStackedVerticalBar(stacked_div,stacked_filename,stacked_attributes,stacked_range);
		
		//Dual_Scale:
		var 	dual_div = "#dual_scale",
				dual_filename = "../data/processed_data/adm/DEU_adm2_pa_clip_total_statistics_fixed.csv",
				//dual_attributes = ["NAME_2", "AVG_MW_RL", "UNIT_RL", "AVG_MW_ODL", "UNIT_OD"] //;	//first: attribute for x-Axis, second: attribute for y-Axis (left bars), second: attribute for y-Axis (right bars
				dual_attributes = ["NAME_2", "AVG_MW_RL", "AVG_MW_ODL"] //;	//first: attribute for x-Axis, second: attribute for y-Axis (left bars), second: attribute for y-Axis (right bars,
				dual_attributes_tooltip = [["Average msrmnt. in room air", "Bq m-3"], ["Average ODL msrmnt.", "nSv h-1"]],
				dual_y_axis_annotation = ["Average Room air measurement [Bq m-3]", "Average ODL measurement [nSv m-1]"];
		//drawDualScaleBarChart(dual_div,dual_filename,dual_attributes,dual_legend_notation);
		
		//Sortable:
		var sortable_div = "#sortable_bar",
			sortable_filename = "../data/processed_data/adm/DEU_adm2_pa_clip_total_statistics_fixed.csv",
			sortable_attributes = ["NAME_2", "AVG_MW_RL"] //;	//first: attribute for x-Axis, second: attribute for y-Axis (left bars), second: attribute for y-Axis (right bars)
		//drawSortableBarChart(sortable_div,sortable_filename,sortable_attributes);
			sortable_attributes_tooltip = ["Average Room Air Measurement", "Bq m-3"],
			sortable_y_axis_annotation = "Average Radon value in room air [Bq m-3]";
	</script>
	
	<!--script to load asynchronous JavaScript, otherwise DOM is not ready when the script is loaded-->
    <script language="javascript" type="text/javascript">
      function loadScriptAfter() {
        /*var script = document.getElementById("diagram");
        script.src = "GeoViz_local/js/stacked_vertical_bar.js";
        document.body.appendChild(script);*/
		
		drawChoroplethMap(choro_div,choro_filenames,choro_attribute_choropleth,choro_attributes_tooltip,choro_domain,choro_range);//tooltip versetzt...
		drawGroupedVerticalBar(grouped_div,grouped_filename,grouped_attributes,grouped_attributes_tooltip,grouped_range,grouped_y_axis_annotation);
		drawStackedVerticalBar(stacked_div,stacked_filename,stacked_attributes,stacked_attributes_tooltip,stacked_range,stacked_y_axis_annotation);
		drawDualScaleBarChart(dual_div,dual_filename,dual_attributes,dual_attributes_tooltip,dual_y_axis_annotation);
		drawSortableBarChart(sortable_div,sortable_filename,sortable_attributes,sortable_attributes_tooltip,sortable_y_axis_annotation);
		
		/*$('#choropleth').hide();
		$('#grouped').hide();
		$('#stacked').hide();
		$('#dual_scale').hide();
		$('#sortable_bar').hide();*/
		//button settings when loading the page:
		document.getElementById('button_choro').disabled = true; 
		document.getElementById('button_grouped').disabled = false; 
		document.getElementById('button_stacked').disabled = false; 
		document.getElementById('button_dual').disabled = false; 
		document.getElementById('button_sortable').disabled = false; 
		document.getElementById('label_checkbox').style.visibility="hidden"; 
		//$(document.getElementById('label_checkbox')).hidden();
		document.getElementById('checkbox').checked = false;
		
		//div display settings when loading the page:
		/*document.getElementById('choropleth').style.display = true; 	
		document.getElementById('grouped').style.display = false; 
		document.getElementById('stacked').style.display = false; 
		document.getElementById('dual_scale').style.display = false; 
		document.getElementById('sortable_bar').style.display = false; */
		$(document.getElementById('choropleth')).show();
		$(document.getElementById('grouped')).hide();
		$(document.getElementById('stacked')).hide();
		$(document.getElementById('dual_scale')).hide();
		$(document.getElementById('sortable_bar')).hide();
      }

      if (window.addEventListener) {
        window.addEventListener("load", loadScriptAfter);
      } else if (window.attachEvent) {
        window.attachEvent("onload", loadScriptAfter);
      } else {
        window.onload = loadScriptAfter;
      }
    </script>
	
	<!--Interaction with the buttons-->
	<script>
	function updateData(clicked_buttonid) {
		
		//Disable clicked button and change drawType as well as enable other buttons:
		for (i = 0; i<arrayChartsData.length; i++) {
			singleChartArray = arrayChartsData[i];
			console.log(singleChartArray[0]);
			console.log(singleChartArray[1]);
			if (clicked_buttonid == singleChartArray[0]) {
				//Disable clicked button:
				document.getElementById(clicked_buttonid).disabled = true; 	
				$(document.getElementById(singleChartArray[1])).show();
				if (clicked_buttonid == "button_sortable") {
					document.getElementById('label_checkbox').style.visibility="visible"; 
				}
			} else {
				//Enable other buttons:
				document.getElementById(singleChartArray[0]).disabled = false;
				//Disable display of div:
				//document.getElementById(singleChartArray[1]).style.display = false;
				$(document.getElementById(singleChartArray[1])).hide();
				if (clicked_buttonid != "button_sortable") {
					document.getElementById('label_checkbox').style.visibility="hidden"; 
				}
			}			
		}			
		//Call loadScriptAfter?	
		//Change drawType:
			
    };	
	</script>
</body>