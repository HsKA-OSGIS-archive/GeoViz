<!--based on: http://bl.ocks.org/bentrm/562ad975d599badf2822 / https://gist.github.com/bentrm/562ad975d599badf2822 -->
<!-- as well as: Learning d3.js mapping - Chapter 5 Example 2 and d3 cookbook - Chapter 12 Example Choropleth map -->
<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Raumluft Charts</title>
<link rel="stylesheet" 
          href="../css/style_choropleth_map.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_grouped_vertical_bar.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_dual_scale_bar_chart.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_stacked_vertical_bar.css" 
          type="text/css">
<link rel="stylesheet" 
          href="../css/style_sortable_bar_chart.css" 
          type="text/css">
<script src="../lib/d3.min.js" charset="utf-8"></script>
<script src="../lib/d3.js" charset="utf-8"></script>
<script src="../lib/topojson.v1.min.js"" charset="utf-8"></script>
<script src="../lib/base.js" charset="utf-8"></script>
<script src="../lib/sparkline.js" charset="utf-8"></script>
<script src="../js/choropleth_map.js"></script>
</head>
<body>
	<!--Define buttons and div for d3 chart-->
	<button id="button_choro" onClick="updateData(this.id)">Choropleth (AVG)</button>
	<button id="button_grouped" onClick="updateData(this.id)">Grouped (AVG)</button>
	<button id="button_stacked" onClick="updateData(this.id)">Stacked (AVG)</button>
	<button id="button_dual" onClick="updateData(this.id)">Dual Scale (RL / BL)</button>
	<button id="button_sortable" onClick="updateData(this.id)">Sortable Bar</button>
	
	<div id="choropleth"></div>
	<div id="grouped"></div>
	<div id="stacked"></div>
	<div id="dual_scale"></div>
	<div id="sortable_bar"></div>
	
	<!--Define variable to control the type of the drawn chart-->
	<script>
		//var arrayDrawTypes = ["raumluft_avg","raumluft_min","raumluft_max","bodenluft","odl"];
		//console.log(arrayDrawTypes[0]);
		//var drawType = arrayDrawTypes[0];
		var arrayButtons = ['button_choro','button_grouped','button_stacked','button_dual','button_sortable'];
		
		//Choropleth:
		var choro_div = "#choropleth",
		choro_filenames = ["../data/processed_data/adm/DEU_adm2_pa_clip_total_statistics2_topo.json","../data/processed_data/adm/DEU_adm2_pa_clip_total_statistics_fixed.csv",'../data/processed_data/bfs/raumluft_4326_statistics_attributes_total_csv.csv'],
		choro_attribute_choropleth = ["ID_2","AVG_MW_RL"],
		choro_attributes_tooltip = ["HAUSART","BAUWEISE","AVG_MW","MESSW_1G","MESSW_EG","MESSW_KE"],
		choro_domain = [60, 100, 150, 250, 350],
		choro_range = ["#0a6e01", "#40ff05", "#E4FF05", "#FFDB00", "#ff6700", "#ff0000"]; //check domain, add 6th class?
		
		//Grouped:
		var grouped_div = "#grouped",
				grouped_filename = "../data/processed_data/bfs/raumluft_4326_statistics_attributes_total_petrograph_stockwerke_csv.csv",
				grouped_attributes = ["petrograph","rl_eg","rl_1g","rl_ke"],	//first: attribute for x-Axis, the following attributes: attribute for y-Axis (bars)
				grouped_range = ["#98abc5","#6b486b", "#ff8c00"]; //colors for bars
		//drawGroupedVerticalBar(grouped_div,grouped_filename,grouped_attributes,grouped_range);
		
		//Stacked:
		var 	stacked_div = "#stacked",
				stacked_filename = "../data/processed_data/bfs/raumluft_4326_statistics_attributes_total_petrograph_stockwerke_csv.csv",
				stacked_attributes = ["petrograph","rl_eg","rl_1g","rl_ke"],	//first: attribute for x-Axis, the following attributes: attribute for y-Axis (bars)
				stacked_range = ["#98abc5","#6b486b", "#ff8c00"]; //colors for bars
		//drawStackedVerticalBar(stacked_div,stacked_filename,stacked_attributes,stacked_range);
		
		//Dual_Scale:
		var 	dual_div = "#dual_scale",
				dual_filename = "../data/processed_data/adm/DEU_adm2_pa_clip_total_statistics_fixed.csv",
				dual_attributes = ["NAME_2", "AVG_MW_RL", "AVG_MW_ODL"];	//first: attribute for x-Axis, second: attribute for y-Axis (left bars), second: attribute for y-Axis (right bars
		//drawDualScaleBarChart(dual_div,dual_filename,dual_attributes);
		
		//Sortable:
		var sortable_div = "#sortable_bar",
			sortable_filename = "../data/processed_data/adm/DEU_adm2_pa_clip_total_statistics_fixed.csv",
			sortable_attributes = ["NAME_2", "AVG_MW_RL"];	//first: attribute for x-Axis, second: attribute for y-Axis (left bars), second: attribute for y-Axis (right bars)
		//drawSortableBarChart(sortable_div,sortable_filename,sortable_attributes);
	</script>
	
	<!--script to load asynchronous JavaScript, otherwise DOM is not ready when the script is loaded-->
    <script language="javascript" type="text/javascript">
      function loadScriptAfter() {
        /*var script = document.getElementById("diagram");
        script.src = "GeoViz_local/js/stacked_vertical_bar.js";
        document.body.appendChild(script);*/
		drawChoroplethMap(choro_div,choro_filenames,choro_attribute_choropleth,choro_attributes_tooltip,choro_domain,choro_range);
		document.getElementById('button_choro').disabled = true; 
		document.getElementById('button_grouped').disabled = false;
		document.getElementById('button_stacked').disabled = false;
		document.getElementById('button_dual').disabled = false;
		document.getElementById('button_sortable').disabled = false;		
      }

      if (window.addEventListener) {
        window.addEventListener("load", loadScriptAfter);
      } else if (window.attachEvent) {
        window.attachEvent("onload", loadScriptAfter);
      } else {
        window.onload = loadScriptAfter;
      }
    </script>
	
	<!--Interaction with the buttons-->
	<script>
	function updateData(clicked_buttonid) {
		
		//Disable clicked button and change drawType as well as enable other buttons:
		for (i = 0; i<arrayButtons.length; i++) {
			if (clicked_buttonid == arrayButtons[i]) {
				//Disable clicked button:
				document.getElementById(clicked_buttonid).disabled = true; 
				
				
				 
			} else {
				//Enable other buttons:
				document.getElementById(arrayButtons[i]).disabled = false;			
			}
		}
		
		console.log(drawType);	
			
		//Call loadScriptAfter?	
		//Change drawType:
			
    };	
	</script>
</body>